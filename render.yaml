# services:
#  - type: web
#    name: render-test-sql-production
#    env: node
#    plan: starter
#    buildCommand: yarn install && yarn build
#    startCommand: rsync -a public/ /data/public/ && yarn start
#    healthCheckPath: /_health
#    disk:
#      name: strapi-data
#      mountPath: /data
#      sizeGB: 1
#    envVars:
#      - key: NODE_VERSION
#        value: 12.18.4
#      - key: NODE_ENV
#        value: production
#      - key: DATABASE_FILENAME
#        value: /data/strapi.db
#      - key: JWT_SECRET
#        generateValue: true
#      - key: ADMIN_JWT_SECRET
#        generateValue: true

services:
  - type: web
    name: pg-cloudinary-staging
    env: node
    plan: starter
    buildCommand: yarn install && yarn build
    startCommand: yarn start
    healthCheckPath: /_health
    envVars:
      - key: NODE_VERSION
        value: 12.18.4
      - key: NODE_ENV
        value: staging
      - key: CLOUDINARY_NAME
        sync: false
      - key: CLOUDINARY_KEY
        sync: false
      - key: CLOUDINARY_SECRET
        sync: false
      - key: DATABASE_URL
        fromDatabase:
          name: strapi
          property: connectionString
      - key: JWT_SECRET
        generateValue: true
      - key: ADMIN_JWT_SECRET
        generateValue: true

databases:
  - name: strapi
    plan: starter
